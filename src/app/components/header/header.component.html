<header class="header">
  <div class="header-container">
    <div class="logo">
      <a routerLink="/">
        <img src="/assets/logo.png" alt="logo" class="brand-logo" />
        <span class="brand-title">{{ universityName }}</span>
      </a>
    </div>

    <!-- Main Navigation -->
    <nav class="main-nav">
      <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-link">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
        </svg>
        Home
      </a>
      <a href="#" class="nav-link">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M22 10v6M2 10l10-5 10 5-10 5z"></path>
          <path d="M6 12v5c3 3 9 3 12 0v-5"></path>
        </svg>
        Universities
      </a>
      <a href="#" class="nav-link">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="16" x2="12" y2="12"></line>
          <line x1="12" y1="8" x2="12.01" y2="8"></line>
        </svg>
        About
      </a>
    </nav>

    <div class="nav-icons">
      <button class="icon-btn search-btn" (click)="openSearch()" title="Search">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.35-4.35"></path>
        </svg>
      </button>

      <button class="compare-btn" (click)="openCompare()" title="Compare">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="3" width="7" height="7"></rect>
          <rect x="14" y="3" width="7" height="7"></rect>
          <rect x="14" y="14" width="7" height="7"></rect>
          <rect x="3" y="14" width="7" height="7"></rect>
        </svg>
        <span>Compare</span>
        <span class="compare-count" *ngIf="compareCount() > 0">{{ compareCount() }}</span>
      </button>

      <!-- Show admin icon if user is admin -->
      @if (currentUser() && isAdmin()) {
        <button class="icon-btn admin-btn" (click)="openAdminDashboard()" title="Admin Dashboard">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
          </svg>
        </button>
      }
      
      <!-- Show profile picture if user is logged in, otherwise show login button -->
      @if (currentUser()) {
        <div class="user-profile" [title]="(currentUser()?.displayName || currentUser()?.email)">
          <img 
            [src]="currentUser()?.photoURL || 'https://ui-avatars.com/api/?name=' + (currentUser()?.displayName || currentUser()?.email || 'User') + '&background=667eea&color=fff&size=200'" 
            [alt]="currentUser()?.displayName || 'User'"
            class="profile-picture"
            (click)="openProfile()"
            (error)="handleImageError($event)"
            title="View profile"
          />
        </div>
      } @else {
        <button class="icon-btn login-btn" (click)="onLoginClick()" title="Login">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
            <polyline points="10 17 15 12 10 7"></polyline>
            <line x1="15" y1="12" x2="3" y2="12"></line>
          </svg>
        </button>
      }
    </div>
  </div>
</header>

<app-search-modal *ngIf="isSearchOpen" (close)="closeSearch()" (searchSubmit)="handleSearch($event)"></app-search-modal>

<app-login-modal *ngIf="isLoginOpen" (close)="closeLogin()"></app-login-modal>
